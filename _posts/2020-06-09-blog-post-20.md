---
title: Lagrangian Dynamics of Open Chains
date: 2020-06-09
permalink: /posts/2012/08/blog-post-20/
author_profile: false
tags:
  - Robotics
  - Continuous Control
---

We now look at the motion of a robot w.rt its forces and torques. The associated area of the study of a robot's motion is called __robot dynamics__ and the associated equations used here are typically second order differential equations (also referred to as __equations of motion__). There are boradly two areas of studying robot dynamics, the Lagrangian formulation and the Newton-Euler formulation. In this post we take a look at the Lagrangian formulation by taking the example of a 2R open chain planar robot.  

__Basic Concepts__
====== 

The first step in the Lagrangian formulation is to choose a set of coordinates $q \in \mathbf{R}^{n}$ that describes the systems configuration. These coordinates $q$ are called __generalized coordinates__. These coorinates, when choosen, define the generalized forces $f \in \mathbf{R}^{n}$. The forces $f$ and the coordinate rates $q^{'}$ are dual to each other in the sense that the inner product $f^{T}q^{'}$ corresponds to power. A Lagrangian function can then be defined as the difference between the system's Kinetic and Potential energies-  
<center>$\mathbf{L}(q,q^{'}) = \mathbf{K}(q,q^{'}) - \mathbf{P}(q)$</center>  

These equations of motion can then be expressed as-  
<center>f = \frac{d}{dt}\frac{d\mathbf{L}}{dq^{'}} - \frac{dK}{dq}</center>  

These equations are also referred to as __Euler-Lagrangian equations with external forces__. Lets now illustrate the Lagrangian dynamics of a single particle. Le the particle have mass $m$ and be constrained to move in a single line. The particle's configuration space is the vertical line and thus we choose $x \in \mathbf{R}$ as our coordinates. Suppose the gravitational force $mg$ downwards and an external force $f$ is applied upward. By Newton's second law of motion, we have-  
<center>$f - mg = mx^{''}$</center>  

We now apply the Lagrangian formulation to dervie the same result.  
<center>$\mathbf{L}(x,x^{'}) = \mathbf{K}(x,x^{'}) - \mathbf{P}(x) = \frac{1}{2}mx^{'2} - mgx$</center>  

The equation of motion is given by  
<center>f = \frac{d}{dt}\frac{d\mathbf{L}}{dx^{'}} - \frac{d\mathbf{L}}{dq} = mx^{''} + mg</center>  
which matches our initial formulation of the particle's motion.  

__The 2R Open Chain Robot__
====== 

<p align="center"><img src="/images/2r.PNG"></p>  

We now derive the dynamics of a 2R open chain planar robot as resented in the figure. The chain moves in $x-y$ plane and gravity $g$ acting the $-y$ direction. The links are modeled as point masses $m_{1}$ and $m_{2}$ concentrated at each end of the link. The positions and velocities of the link-1 mass can now be expressed as-  
<p align="center"><img src="/images/m1.PNG"></p>  
with those of the link-2 mass given as-  
<p align="center"><img src="/images/m2.PNG"></p>  

We choose the joint coordinates $\theta = (\theta_{1},\theta_{2})$ as the generalized coordinates. The generalized forces $\tau = (\tau_{1},\tau_{2})$ then correspond to the joint torques. The Langrangian can now be expressed as-  
<center>$\mathbf{L}(\theta,\theta^{'}) = \sum_{i=1}^{2}(\mathbf{K}_{i} - mathbf{P}_{i})$</center>  

where the link kinetic energy terms $\mathbf{K}_{1}$ and $\mathbf{K}_{2}$ are  
<p align="center"><img src="/images/m3.PNG"></p>  

and the link potential energy terms are  
<center>$\mathbf{P}_{1} = m_{1}gy_{1} = m_{1}gL_{1}sin\theta{1}$</center>  
<center>$\mathbf{P}_{1} = m_{2}gy_{2} = m_{2}g(L_{1}sin\theta{1} + L_{2}sin(\theta{1} + \theta{2}))$</center>  

The Euler-Lagrange equations for this example are of the form-  
<center>$\tau_{i} = \frac{d}{dt}\frac{d\mathbf{L}}{d\theta^{'}_{i}} - \frac{d\mathbf{L}}{d\theta_{i}} \forall i \in {1,2}$</center>  

<p align="center"><img src="/images/m4.PNG"></p>  

We can gather the terms together in a simple equation of the form-  
<center>$\tau = M(\theta)\theta^{''} + c(\theta,\theta^{'}) + g(\theta)$</center>  

with  
<p align="center"><img src="/images/m5.PNG"></p>  

Here, $M(\theta)$ is the symmetric postive-definite __mass matrix__, $c(\theta,\theta^{'})$ is the vector containing the Coriolis and centripetal torques and $g(\theta)$ is the vector containing the gravitational torques. These reveal that the equations of motion are linear in $q^{''}$, quadratic in $q^{'}$ and trignometric in $q$.  

