---
title: Holonomic and Pfaffian Constraints for Robotic Control
date: 2020-06-06
permalink: /posts/2012/08/blog-post-17/
author_profile: false
tags:
  - Robotics
  - Continuous Control
---

Obtaining a comprehensive representation of a robot's task space and model of the world is an important facet of controlling behavior. In the case of closed loop systems, an implicit representation can be easily obtained.  

__Loop Closure__
====== 
<p align="center"><img src="/images/loop.PNG"></p>  

Consider the closed loop system presented in the figure. The planar four-bar linkage consists of 1 degree of freedom. The fact that the 4 bars form a closed loop system can be mathematically expressed as -  

<center>$L_{1}cos(\theta_{1}) + L_{2}cos(\theta_{1}+\theta_{2}) + L_{3}cos(\theta_{1}+\theta_{2}+\theta_{3}) + L_{4}cos(\theta_{1}+\theta_{2}+\theta_{3}+\theta_{4}) = 0$</center>  
<center>$L_{1}sin(\theta_{1}) + L_{2}sin(\theta_{1}+\theta_{2}) + L_{3}sin(\theta_{1}+\theta_{2}+\theta_{3}) + L_{4}sin(\theta_{1}+\theta_{2}+\theta_{3}+\theta_{4}) = 0$</center>  
<center>\theta_{1}+\theta_{2}+\theta_{3}+\theta_{4} = 0</center>  

These are obtained by viewing the 4 bar linkage as a serial chain with 4 revolute joints and the tip of linkage $L_{4}$ always coincides with the origin and the orientation of $L_{4}$ is always horizontal. Since the expressions are obtained from the closure of the system as a loop, the equations are referred to as loop-closure equations. For the system given, these are expressed as a set of 3 equations with 4 unknowns and the solution forms a one-dimensional curve in the four-dimensional joint space.  

__Holonomic Constraints__
====== 
Generalizing the above to a robotic system consisting of one or more closed loops, the configuration space can be implicitly represented by the column vector $\theta = [\theta_{1},\theta_{2},\theta_{3},...\theta_{N}] \in \mathbf{R}^{N}$. Thus, the loop closure equations can be expressed as-  

<center>g(\theta) = \begin{bmatrix} g_{1}(\theta_{1},...,\theta_{N}) \\ g_{2}(\theta_{1},...,\theta_{N}) \\ . \\ . \\ . \\ g_{k}(\theta_{1},...,\theta_{N})\end{bmatrix} = 0</center>  

a set of $k$ independent equations with $k \leq n$. Such contraints are known as Holonmic constraints which reduce the dimensionaltiy of the C-space.  

__Pfaffian Constraints__
====== 
The C-space can be viewed as a surface of dimension $n-k$(assuming that all constraints are independent) embedded in $\mathbf{R}^{N}$. Suppose that a closed-loop robot with loop closure equation $g(\theta) = 0$ is in motion following the time trajectory $\theta(t)$. Differentiating both sides of $g(\theta(t)) = 0$ w.r.t $t$ gives us-  
<center>\frac{d}{dt}g(\theta(t)) = 0</center>
<p align="center"><img src="/images/mat1.PNG"></p>  

This can be expressed as a matrix multiplication-  

<p align="center"><img src="/images/mat2.PNG"></p>  

which we can write as-  

<center>$\frac{\delg}{\del \theta}(\theta)\theta^{'} = 0$</center>  

Here, the joint-velocity vector $\theta^{'}$ denotes the derivative of $\theta$ wr.t. to time $t$. The constraint can thus be written as-  

<center>$A(\theta)\theta^{'} = 0$</center>  
 Velocity constraints of this form are called Pfaffian constraints. For the case $A(\theta) = \frac{\delg(\theta)}{\del \theta}$ one could regard $g(\theta)$ as the integral of $A(\theta)$. For this reason, holonomic constraints of the form $g(\theta) = 0$ are called __integrable constraints__ which indicates that the velocity constraints which are implied can be integrated to give equivalent configuration constraints.  

__Non-Holonomic Constraints__
====== 

We now consider a different class of Pfaffian constraints. To illustrate this, consider the example of a rolling coin with radius $r$ on a plane show in the figure. The configuration of the coin is given by the contact point $(x,y)$ on the plane, the steering angle $\phi$ and the angle of rotation $\theta$. The C-space of the coin is therefore $T^{2} \times \mathbf{R}^{2}$ where $T^{2}$ is the torus parameterized by the angle $\phi$ and $\theta$. The C-space is thus four-dimensional.  

<p align="center"><img src="/images/coin.PNG"></p>  

Collecting the 4 space coordinates in a single vector $q = [q_{1},q_{2},q_{3},q_{4}]^{T} = [x,y,\phi,\theta]^{T} \in \mathbf{R}^{2}\times T^{2}$. Now, the coin must roll without slipping in a given direction on the plane. This can be mathematically expressed as-  
<p align="center"><img src="/images/mat3.PNG"></p>  

Applying this no-slip rolling constraint to our C-space coordinate vector gives us-  
<p align="center"><img src="/images/mat4.PNG"></p>  

Clearly, these are Pfaffian constraints of the form $A(\theta)\theta^{'} = 0$. However, these constraints are not integrable, that is, for $A(\theta)$ there does not exist a differentiable function $g$ such that $\frac{\del g(q)}{\del q} = A(q)$. Constraints of such form which are non-integrabe but are Pfaffian in nature are called __Non-Holonmic Constraints__.  

__References__
====== 
1.  [Modern Robotics: Mechanics, Planning and Control, Kevin M. Lynch, Frank C. Park](http://hades.mech.northwestern.edu/index.php/Modern_Robotics)



